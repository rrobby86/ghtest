var K=Object.defineProperty,T=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var M=(s,e,o)=>e in s?K(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,w=(s,e)=>{for(var o in e||(e={}))E.call(e,o)&&M(s,o,e[o]);if(S)for(var o of S(e))R.call(e,o)&&M(s,o,e[o]);return s},P=(s,e)=>T(s,z(e));import{d as q,o as f,c as C,a as v,b as t,r as I,e as U,T as X,t as m,n as $,f as O,g as k,w as L,h,i as x,u as _,F as y,j as N,k as j,l as G,v as H,m as J,p as Q,s as W}from"./vendor.0a759763.js";const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}};Y();function Z(s){return[...Array(s)].map(e=>[...Array(4)].map(o=>[]))}const D=q("scores",{state:()=>({rounds:3,scores:[]}),getters:{roundScores:s=>{const e=[];for(const l of s.scores){const r=[];for(const c of l.scores){var o=0;for(const[n,i]of c.entries())for(const u of i)o+=(n+1)*u;r.push(o)}e.push(r)}return e},totalScores:s=>{const e=[];for(const l of s.roundScores){var o=0;for(const r of l)o+=r;e.push(o)}return e}},actions:{addPlayer(s){this.scores.push(P(w({},s),{scores:Z(this.rounds)}))},updatePlayer(s,e){this.scores[s].name=e.name,this.scores[s].color=e.color},removePlayer(s){this.scores.splice(s,1)},shuffle(){for(let o=this.scores.length-1;o>0;o--){var s=Math.floor(Math.random()*(o+1)),e=this.scores[o];this.scores[o]=this.scores[s],this.scores[s]=e}},rank(){const s=[...Array(this.scores.length)].map((o,l)=>({index:l,score:this.totalScores[l]}));s.sort((o,l)=>l.score-o.score);const e=s.map(o=>this.scores[o.index]);this.scores.splice(0,e.length,...e)}},persist:!0});const ee={key:0,class:"modal-overlay"},oe={class:"modal-container"},V={props:["open"],setup(s){return(e,o)=>(f(),C(X,{to:"#modals"},[s.open?(f(),v("div",ee,[t("div",oe,[I(e.$slots,"default")])])):U("",!0)]))}};const A={props:["value","color"],setup(s){return(e,o)=>(f(),v("div",{class:"die",style:$({backgroundColor:s.color})},m(s.value),5))}};const se={class:"scoremod-root flex-col flex-gap-m"},te={class:"scoremod-main flex-row flex-gap-m"},re={class:"scoremod-dice flex-col flex-gap-m"},ne={class:"scoremod-slots flex-grow flex-col flex-gap-m"},le=["onClick"],ce={class:"scoremod-slot-label"},ae={class:"scoremod-footer flex-row flex-gap-m"},ie={class:"scoremod-total flex-grow"},ue={props:["target"],emits:["close"],setup(s){const e=s,o=D(),l=()=>o.scores[e.target.player].scores[e.target.round],r=O(()=>o.scores[e.target.player].color),c=O(()=>o.roundScores[e.target.player][e.target.round]),n=k(null);function i(p){n.value!==null&&l()[n.value].push(p)}function u(p,d){l()[p].splice(d,1)}return(p,d)=>(f(),C(V,{open:s.target!==null},{default:L(()=>[t("div",se,[t("div",te,[t("div",re,[(f(),v(y,null,h(6,a=>x(A,{key:a,value:a,color:_(r),onClick:g=>i(a)},null,8,["value","color","onClick"])),64))]),t("div",ne,[(f(),v(y,null,h([3,2,1,0],a=>t("div",{class:N(["scoremod-slot",{selected:n.value===a}]),onClick:g=>n.value=a},[t("div",ce,m(a+1)+"x",1),(f(!0),v(y,null,h(l()[a],(g,b)=>(f(),C(A,{key:b,value:g,color:_(r),onClick:Ae=>u(a,b)},null,8,["value","color","onClick"]))),128))],10,le)),64))])]),t("div",ae,[t("button",{class:"scoremod-ok",onClick:d[0]||(d[0]=a=>s.target=null)},"OK"),t("div",ie,m(_(c)),1)])])]),_:1},8,["open"]))}};const de={class:"playermod-root flex-col flex-gap-m"},fe={class:"playermod-palette"},_e=["onClick"],pe={emits:["confirmed"],setup(s,{expose:e,emit:o}){const l=["#ff0000","#ff8800","#ffff00","#00ff00","#8888ff","#2222ff","#ff22ff","#880088"],r=k(!1),c=k(null),n=j({name:"",color:null});function i(p,d={name:"",color:null}){r.value=!0,c.value=p,n.name=d.name,n.color=d.color}function u(){r.value=!1,o("confirmed",c.value,n)}return e({open:i}),(p,d)=>(f(),C(V,{open:r.value},{default:L(()=>[t("div",de,[G(t("input",{class:"playermod-name","onUpdate:modelValue":d[0]||(d[0]=a=>_(n).name=a)},null,512),[[H,_(n).name]]),t("div",fe,[(f(),v(y,null,h(l,a=>t("button",{class:N(["playermod-color",{selected:_(n).color===a}]),key:a,style:$({backgroundColor:a}),onClick:g=>_(n).color=a},null,14,_e)),64))]),t("button",{onClick:u},"OK"),t("button",{onClick:d[1]||(d[1]=a=>r.value=!1)},"Cancel")])]),_:1},8,["open"]))}};const ve={class:"main"},me={class:"main-topbar"},he=t("div",{class:"main-title"},"DiceCore",-1),ye={class:"main-buttons"},ge={class:"main-table"},ke={class:"scoretable"},Ce={class:"player-root"},$e={class:"player-name"},xe={class:"player-buttons"},be=["onClick"],Se=["onClick"],Me=["onClick"],we={setup(s){const e=D(),o=k(null),l=k();function r(n,i){o.value={player:n,round:i}}function c(n,i){n===-1?e.addPlayer(i):e.updatePlayer(n,i)}return(n,i)=>(f(),v("div",ve,[t("div",me,[he,t("div",ye,[t("button",{onClick:i[0]||(i[0]=u=>l.value.open(-1))},"Add"),t("button",{onClick:i[1]||(i[1]=(...u)=>_(e).shuffle&&_(e).shuffle(...u))},"Shuffle"),t("button",{onClick:i[2]||(i[2]=(...u)=>_(e).rank&&_(e).rank(...u))},"Rank")])]),t("div",ge,[t("table",ke,[(f(!0),v(y,null,h(_(e).scores,(u,p)=>(f(),v("tr",{key:p},[t("td",{class:"player-cell",style:$({backgroundColor:u?u.color:"#000000"})},[t("div",Ce,[t("div",$e,m(u?u.name:"foo"),1),t("div",xe,[t("button",{onClick:d=>l.value.open(p,u)},"M",8,be),t("button",{onClick:d=>_(e).removePlayer(p)},"X",8,Se)])])],4),(f(!0),v(y,null,h(_(e).roundScores[p],(d,a)=>(f(),v("td",{class:"score-cell",onClick:g=>r(p,a)},m(d),9,Me))),256)),t("td",{class:"total-cell",style:$({backgroundColor:u?u.color:"#000000"})},m(_(e).totalScores[p]),5)]))),128))])]),x(ue,{target:o.value,onClose:i[3]||(i[3]=u=>o.value=null)},null,8,["target"]),x(pe,{ref_key:"playerModal",ref:l,onConfirmed:c},null,512)]))}};const Pe={class:"root-container"},Oe={setup(s){return(e,o)=>(f(),v("div",Pe,[x(we)]))}},B=J(Oe),F=Q();F.use(W);B.use(F);B.mount("#app");
